<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="../build/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="../build/nv.d3.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel='stylesheet' type='text/css'>

    <style>
      text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
		
		
		
    </style>
</head>
<body class='with-3d-shadow with-transitions'>


<svg id="chart1"></svg>

<script>
    var histcatexplong = [
		{
            "key" : "NB" ,
            color: "#8dd3c7",
            "values" : [[1269835200000 , 1848] ,
			[1277784000000 , 1589] ,
			[1285732800000 , 1613] ,
			[1293598800000 , 1436] ,
			[1301284800000 , 1214] ,
			[1309233600000 , 1563] ,
			[1317182400000 , 1256] ,
			[1325048400000 , 1208] ,
			[1332907200000 , 1300] ,
			[1340856000000 , 1553] ,
			[1348804800000 , 1329] ,
			[1356670800000 , 999] ,
			[1364443200000 , 1326] ,
			[1372392000000 , 1522] ,
			[1380340800000 , 1292] ,
			[1388206800000 , 1370] ,
			[1395979200000 , 1590] ,
			[1403928000000 , 1681] ,
			[1411876800000 , 1734] ,
			[1419742800000 , 1491] ,
			[1427515200000 , 1432] ,
			[1435464000000 , 2097] ,
			[1443412800000 , 1678] ,
			[1451278800000 , 2218] ,
			[1459137600000 , 1759] ,
			[1467086400000 , 2063] ,
			[1475035200000 , 2036] ,
			[1482901200000 , 1667] ,
			[1490673600000 , 1859] ,
			[1498622400000 , 2114]]

        } ,
		
		{
            "key" : "A1" , 
            color: "#fdb462",
            "values" : [[1269835200000 , 1497] ,
			[1277784000000 , 1757] ,
			[1285732800000 , 1654] ,
			[1293598800000 , 1607] ,
			[1301284800000 , 1615] ,
			[1309233600000 , 1865] ,
			[1317182400000 , 1695] ,
			[1325048400000 , 1552] ,
			[1332907200000 , 1694] ,
			[1340856000000 , 1834] ,
			[1348804800000 , 1768] ,
			[1356670800000 , 1547] ,
			[1364443200000 , 1598] ,
			[1372392000000 , 1693] ,
			[1380340800000 , 1669] ,
			[1388206800000 , 1592] ,
			[1395979200000 , 1589] ,
			[1403928000000 , 1824] ,
			[1411876800000 , 1800] ,
			[1419742800000 , 1613] ,
			[1427515200000 , 1606] ,
			[1435464000000 , 1948] ,
			[1443412800000 , 1745] ,
			[1451278800000 , 1978] ,
			[1459137600000 , 2049] ,
			[1467086400000 , 2366] ,
			[1475035200000 , 2180] ,
			[1482901200000 , 1975] ,
			[1490673600000 , 2152] ,
			[1498622400000 , 2467]]

        } ,
		
		{
            "key" : "A2" ,
		disabled: true,
            color: "#C0504D",
            "values" : [[1269835200000 , 18246] ,
			[1277784000000 , 21509] ,
			[1285732800000 , 21806] ,
			[1293598800000 , 21086] ,
			[1301284800000 , 21133] ,
			[1309233600000 , 24154] ,
			[1317182400000 , 23987] ,
			[1325048400000 , 22336] ,
			[1332907200000 , 22314] ,
			[1340856000000 , 24787] ,
			[1348804800000 , 24561] ,
			[1356670800000 , 21886] ,
			[1364443200000 , 23349] ,
			[1372392000000 , 26264] ,
			[1380340800000 , 28037] ,
			[1388206800000 , 26418] ,
			[1395979200000 , 24875] ,
			[1403928000000 , 28602] ,
			[1411876800000 , 29316] ,
			[1419742800000 , 27295] ,
			[1427515200000 , 25976] ,
			[1435464000000 , 30487] ,
			[1443412800000 , 30813] ,
			[1451278800000 , 28957] ,
			[1459137600000 , 29599] ,
			[1467086400000 , 31629] ,
			[1475035200000 , 32531] ,
			[1482901200000 , 28971] ,
			[1490673600000 , 30452] ,
			[1498622400000 , 33039]]

        } ,
		
		{
            "key" : "A3" ,
		disabled: true,
            color: "#bc80bd",
            "values" : [[1269835200000 , 4737] ,
			[1277784000000 , 5603] ,
			[1285732800000 , 5235] ,
			[1293598800000 , 4663] ,
			[1301284800000 , 5427] ,
			[1309233600000 , 5216] ,
			[1317182400000 , 4776] ,
			[1325048400000 , 4803] ,
			[1332907200000 , 5653] ,
			[1340856000000 , 5740] ,
			[1348804800000 , 5585] ,
			[1356670800000 , 4653] ,
			[1364443200000 , 5436] ,
			[1372392000000 , 5984] ,
			[1380340800000 , 5439] ,
			[1388206800000 , 5139] ,
			[1395979200000 , 5550] ,
			[1403928000000 , 6164] ,
			[1411876800000 , 5948] ,
			[1419742800000 , 4827] ,
			[1427515200000 , 4674] ,
			[1435464000000 , 6608] ,
			[1443412800000 , 6677] ,
			[1451278800000 , 6259] ,
			[1459137600000 , 4972] ,
			[1467086400000 , 6754] ,
			[1475035200000 , 6535] ,
			[1482901200000 , 5745] ,
			[1490673600000 , 5517] ,
			[1498622400000 , 6667]]

        } ,
		
		{
            "key" : "DM" ,
            color: "#80b1d3",
            "values" : [[1269835200000 , 245] ,
			[1277784000000 , 306] ,
			[1285732800000 , 278] ,
			[1293598800000 , 265] ,
			[1301284800000 , 250] ,
			[1309233600000 , 332] ,
			[1317182400000 , 316] ,
			[1325048400000 , 287] ,
			[1332907200000 , 315] ,
			[1340856000000 , 322] ,
			[1348804800000 , 333] ,
			[1356670800000 , 298] ,
			[1364443200000 , 331] ,
			[1372392000000 , 394] ,
			[1380340800000 , 438] ,
			[1388206800000 , 413] ,
			[1395979200000 , 355] ,
			[1403928000000 , 475] ,
			[1411876800000 , 530] ,
			[1419742800000 , 510] ,
			[1427515200000 , 469] ,
			[1435464000000 , 616] ,
			[1443412800000 , 498] ,
			[1451278800000 , 606] ,
			[1459137600000 , 522] ,
			[1467086400000 , 590] ,
			[1475035200000 , 573] ,
			[1482901200000 , 567] ,
			[1490673600000 , 545] ,
			[1498622400000 , 582]]

        }
    ];
    var chart;
    nv.addGraph(function() {
        chart = nv.models.stackedAreaChart()
            .useInteractiveGuideline(true)
            .x(function(d) { return d[0] })
            .y(function(d) { return d[1] })
            .controlLabels({stacked: "Stacked"}) 
            .duration(300);

			
        chart.xAxis			
			.ticks(3)
			.tickFormat( function ( d ) {
                             // get the milliseconds since Epoch for the date
                             //var milli = (x.getTime() - 10000);

                             // calculate new date 10 seconds earlier. Could be one second, 
                             // but I like a little buffer for my neuroses
                             //var vanilli = new Date(milli);
							var vanilli = new Date(d);
							
                             // calculate the month (0-11) based on the new date
                             var mon = vanilli.getMonth();
                             var yr = vanilli.getFullYear();

                             // return appropriate quarter for that month
                             if ( mon <= 2 ) {
                                 return  "Q1-" + yr;
                             } else if ( mon <= 5 ) {
                                 return  "Q2-" + yr;
                             } else if ( mon <= 8 ) {
                                 return  "Q3-" + yr;
                             } else {
                                 return "Q4-" + yr;
                             }
                         } )

		chart.xScale(d3.time.scale());

	 chart._options.controlOptions = ['Stacked', 'Expanded'];
	 
	 
	chart.interpolate("linear"); 
		
        chart.yAxis
			.ticks(8)
			.tickFormat(d3.format('.2s'));
			
			
			//Example of how to customize the tooltip.
		chart.interactiveLayer
			.tooltip
			//.headerFormatter(function(d) {return d3.time.format('%m')(new Date(d));})
			.headerFormatter(function(d) {return ((d));})
			.valueFormatter(d3.format(','));
			
			d3.select('#chart1')
			  .append("text")
			  .attr("x", 450)             
			  .attr("y", 80)
			  .attr("text-anchor", "right")  
			  .style("font-size", "18px")		  
			  .text("");
			  
			
        //chart.legend.vers('furious');
        d3.select('#chart1')
            .datum(histcatexplong)
            .transition().duration(1000)
            .call(chart)
            .each('start', function() {
                setTimeout(function() {
                    d3.selectAll('#chart1 *').each(function() {
                        if(this.__transition__)
                            this.__transition__.duration = 1;
                    })
                }, 0)
            });
        nv.utils.windowResize(chart.update);
        return chart;
    });
</script>
</body>
</html>