<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="../build/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="../build/nv.d3.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel='stylesheet' type='text/css'>

    <style>
      text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
		
		
		
    </style>
</head>
<body class='with-3d-shadow with-transitions'>


<svg id="chart1"></svg>

<script>
    var histcatexplong = [
		{
            "key" : "NB" ,
            color: "#8dd3c7",
            "values" : [[1264741200000 , 547] ,
			[1267333200000 , 606] ,
			[1269835200000 , 695] ,
			[1272513600000 , 513] ,
			[1275105600000 , 483] ,
			[1277784000000 , 593] ,
			[1280376000000 , 501] ,
			[1283054400000 , 654] ,
			[1285732800000 , 458] ,
			[1288324800000 , 548] ,
			[1291006800000 , 450] ,
			[1293598800000 , 438] ,
			[1296277200000 , 405] ,
			[1298869200000 , 293] ,
			[1301284800000 , 516] ,
			[1303963200000 , 659] ,
			[1306555200000 , 435] ,
			[1309233600000 , 469] ,
			[1311825600000 , 411] ,
			[1314504000000 , 457] ,
			[1317182400000 , 388] ,
			[1319774400000 , 375] ,
			[1322456400000 , 444] ,
			[1325048400000 , 389] ,
			[1327726800000 , 381] ,
			[1330405200000 , 449] ,
			[1332907200000 , 470] ,
			[1335585600000 , 631] ,
			[1338177600000 , 474] ,
			[1340856000000 , 448] ,
			[1343448000000 , 466] ,
			[1346126400000 , 436] ,
			[1348804800000 , 427] ,
			[1351396800000 , 314] ,
			[1354078800000 , 358] ,
			[1356670800000 , 327] ,
			[1359349200000 , 378] ,
			[1362027600000 , 392] ,
			[1364443200000 , 556] ,
			[1367121600000 , 493] ,
			[1369713600000 , 603] ,
			[1372392000000 , 426] ,
			[1374984000000 , 428] ,
			[1377662400000 , 426] ,
			[1380340800000 , 438] ,
			[1382932800000 , 489] ,
			[1385614800000 , 386] ,
			[1388206800000 , 495] ,
			[1390885200000 , 465] ,
			[1393563600000 , 489] ,
			[1395979200000 , 636] ,
			[1398657600000 , 610] ,
			[1401249600000 , 540] ,
			[1403928000000 , 531] ,
			[1406520000000 , 622] ,
			[1409198400000 , 505] ,
			[1411876800000 , 607] ,
			[1414468800000 , 493] ,
			[1417150800000 , 456] ,
			[1419742800000 , 542] ,
			[1422421200000 , 406] ,
			[1425099600000 , 370] ,
			[1427515200000 , 656] ,
			[1430193600000 , 582] ,
			[1432785600000 , 575] ,
			[1435464000000 , 940] ,
			[1438056000000 , 544] ,
			[1440734400000 , 596] ,
			[1443412800000 , 538] ,
			[1446004800000 , 792] ,
			[1448686800000 , 611] ,
			[1451278800000 , 815] ,
			[1453957200000 , 460] ,
			[1456635600000 , 468] ,
			[1459137600000 , 831] ,
			[1461816000000 , 589] ,
			[1464408000000 , 696] ,
			[1467086400000 , 778] ,
			[1469678400000 , 552] ,
			[1472356800000 , 752] ,
			[1475035200000 , 732] ,
			[1477627200000 , 560] ,
			[1480309200000 , 589] ,
			[1482901200000 , 518] ,
			[1485579600000 , 545] ,
			[1488258000000 , 497] ,
			[1490673600000 , 817] ,
			[1493352000000 , 637] ,
			[1495944000000 , 706] ,
			[1498622400000 , 771]]

        } ,
		
		{
            "key" : "A1" , 
            color: "#fdb462",
            "values" : [[1264741200000 , 458] ,
			[1267333200000 , 445] ,
			[1269835200000 , 594] ,
			[1272513600000 , 617] ,
			[1275105600000 , 554] ,
			[1277784000000 , 586] ,
			[1280376000000 , 532] ,
			[1283054400000 , 604] ,
			[1285732800000 , 518] ,
			[1288324800000 , 578] ,
			[1291006800000 , 529] ,
			[1293598800000 , 500] ,
			[1296277200000 , 470] ,
			[1298869200000 , 489] ,
			[1301284800000 , 656] ,
			[1303963200000 , 595] ,
			[1306555200000 , 680] ,
			[1309233600000 , 590] ,
			[1311825600000 , 509] ,
			[1314504000000 , 597] ,
			[1317182400000 , 589] ,
			[1319774400000 , 489] ,
			[1322456400000 , 518] ,
			[1325048400000 , 545] ,
			[1327726800000 , 490] ,
			[1330405200000 , 557] ,
			[1332907200000 , 647] ,
			[1335585600000 , 588] ,
			[1338177600000 , 642] ,
			[1340856000000 , 604] ,
			[1343448000000 , 607] ,
			[1346126400000 , 609] ,
			[1348804800000 , 552] ,
			[1351396800000 , 549] ,
			[1354078800000 , 493] ,
			[1356670800000 , 505] ,
			[1359349200000 , 506] ,
			[1362027600000 , 493] ,
			[1364443200000 , 599] ,
			[1367121600000 , 620] ,
			[1369713600000 , 628] ,
			[1372392000000 , 445] ,
			[1374984000000 , 541] ,
			[1377662400000 , 643] ,
			[1380340800000 , 485] ,
			[1382932800000 , 574] ,
			[1385614800000 , 489] ,
			[1388206800000 , 529] ,
			[1390885200000 , 452] ,
			[1393563600000 , 483] ,
			[1395979200000 , 654] ,
			[1398657600000 , 587] ,
			[1401249600000 , 587] ,
			[1403928000000 , 650] ,
			[1406520000000 , 645] ,
			[1409198400000 , 604] ,
			[1411876800000 , 551] ,
			[1414468800000 , 587] ,
			[1417150800000 , 443] ,
			[1419742800000 , 583] ,
			[1422421200000 , 477] ,
			[1425099600000 , 463] ,
			[1427515200000 , 666] ,
			[1430193600000 , 625] ,
			[1432785600000 , 587] ,
			[1435464000000 , 736] ,
			[1438056000000 , 633] ,
			[1440734400000 , 614] ,
			[1443412800000 , 498] ,
			[1446004800000 , 689] ,
			[1448686800000 , 576] ,
			[1451278800000 , 713] ,
			[1453957200000 , 582] ,
			[1456635600000 , 633] ,
			[1459137600000 , 834] ,
			[1461816000000 , 729] ,
			[1464408000000 , 763] ,
			[1467086400000 , 874] ,
			[1469678400000 , 739] ,
			[1472356800000 , 782] ,
			[1475035200000 , 659] ,
			[1477627200000 , 598] ,
			[1480309200000 , 670] ,
			[1482901200000 , 707] ,
			[1485579600000 , 630] ,
			[1488258000000 , 632] ,
			[1490673600000 , 890] ,
			[1493352000000 , 794] ,
			[1495944000000 , 827] ,
			[1498622400000 , 846]]

        } ,
		
		{
            "key" : "A2" ,
		disabled: true,
            color: "#C0504D",
            "values" : [[1264741200000 , 5706] ,
			[1267333200000 , 5321] ,
			[1269835200000 , 7219] ,
			[1272513600000 , 7555] ,
			[1275105600000 , 6582] ,
			[1277784000000 , 7372] ,
			[1280376000000 , 7085] ,
			[1283054400000 , 7486] ,
			[1285732800000 , 7235] ,
			[1288324800000 , 7512] ,
			[1291006800000 , 6957] ,
			[1293598800000 , 6617] ,
			[1296277200000 , 6434] ,
			[1298869200000 , 6115] ,
			[1301284800000 , 8584] ,
			[1303963200000 , 7687] ,
			[1306555200000 , 7887] ,
			[1309233600000 , 8580] ,
			[1311825600000 , 7641] ,
			[1314504000000 , 8462] ,
			[1317182400000 , 7884] ,
			[1319774400000 , 7343] ,
			[1322456400000 , 7294] ,
			[1325048400000 , 7699] ,
			[1327726800000 , 7037] ,
			[1330405200000 , 7055] ,
			[1332907200000 , 8222] ,
			[1335585600000 , 7820] ,
			[1338177600000 , 8336] ,
			[1340856000000 , 8631] ,
			[1343448000000 , 8231] ,
			[1346126400000 , 8998] ,
			[1348804800000 , 7332] ,
			[1351396800000 , 7764] ,
			[1354078800000 , 6931] ,
			[1356670800000 , 7191] ,
			[1359349200000 , 7875] ,
			[1362027600000 , 7003] ,
			[1364443200000 , 8471] ,
			[1367121600000 , 9025] ,
			[1369713600000 , 8927] ,
			[1372392000000 , 8312] ,
			[1374984000000 , 9563] ,
			[1377662400000 , 9682] ,
			[1380340800000 , 8792] ,
			[1382932800000 , 9802] ,
			[1385614800000 , 8096] ,
			[1388206800000 , 8520] ,
			[1390885200000 , 8245] ,
			[1393563600000 , 7352] ,
			[1395979200000 , 9278] ,
			[1398657600000 , 9561] ,
			[1401249600000 , 9067] ,
			[1403928000000 , 9974] ,
			[1406520000000 , 10298] ,
			[1409198400000 , 9635] ,
			[1411876800000 , 9383] ,
			[1414468800000 , 10279] ,
			[1417150800000 , 7805] ,
			[1419742800000 , 9211] ,
			[1422421200000 , 7725] ,
			[1425099600000 , 7994] ,
			[1427515200000 , 10257] ,
			[1430193600000 , 10095] ,
			[1432785600000 , 9297] ,
			[1435464000000 , 11095] ,
			[1438056000000 , 10930] ,
			[1440734400000 , 10181] ,
			[1443412800000 , 9702] ,
			[1446004800000 , 10203] ,
			[1448686800000 , 8900] ,
			[1451278800000 , 9854] ,
			[1453957200000 , 8870] ,
			[1456635600000 , 9091] ,
			[1459137600000 , 11638] ,
			[1461816000000 , 10509] ,
			[1464408000000 , 10064] ,
			[1467086400000 , 11056] ,
			[1469678400000 , 10282] ,
			[1472356800000 , 11496] ,
			[1475035200000 , 10753] ,
			[1477627200000 , 9663] ,
			[1480309200000 , 9653] ,
			[1482901200000 , 9655] ,
			[1485579600000 , 9448] ,
			[1488258000000 , 8896] ,
			[1490673600000 , 12108] ,
			[1493352000000 , 10081] ,
			[1495944000000 , 11356] ,
			[1498622400000 , 11602]]

        } ,
		
		{
            "key" : "A3" ,
		disabled: true,
            color: "#bc80bd",
            "values" : [[1264741200000 , 1085] ,
			[1267333200000 , 990] ,
			[1269835200000 , 2662] ,
			[1272513600000 , 2088] ,
			[1275105600000 , 1616] ,
			[1277784000000 , 1899] ,
			[1280376000000 , 1691] ,
			[1283054400000 , 1698] ,
			[1285732800000 , 1846] ,
			[1288324800000 , 1694] ,
			[1291006800000 , 1468] ,
			[1293598800000 , 1501] ,
			[1296277200000 , 1241] ,
			[1298869200000 , 1155] ,
			[1301284800000 , 3031] ,
			[1303963200000 , 1733] ,
			[1306555200000 , 1813] ,
			[1309233600000 , 1670] ,
			[1311825600000 , 1513] ,
			[1314504000000 , 1664] ,
			[1317182400000 , 1599] ,
			[1319774400000 , 1651] ,
			[1322456400000 , 1567] ,
			[1325048400000 , 1585] ,
			[1327726800000 , 1246] ,
			[1330405200000 , 1782] ,
			[1332907200000 , 2625] ,
			[1335585600000 , 2070] ,
			[1338177600000 , 1885] ,
			[1340856000000 , 1785] ,
			[1343448000000 , 2069] ,
			[1346126400000 , 1825] ,
			[1348804800000 , 1691] ,
			[1351396800000 , 1586] ,
			[1354078800000 , 1505] ,
			[1356670800000 , 1562] ,
			[1359349200000 , 1535] ,
			[1362027600000 , 1459] ,
			[1364443200000 , 2442] ,
			[1367121600000 , 1877] ,
			[1369713600000 , 2217] ,
			[1372392000000 , 1890] ,
			[1374984000000 , 1955] ,
			[1377662400000 , 1799] ,
			[1380340800000 , 1685] ,
			[1382932800000 , 1832] ,
			[1385614800000 , 1604] ,
			[1388206800000 , 1703] ,
			[1390885200000 , 1411] ,
			[1393563600000 , 1590] ,
			[1395979200000 , 2549] ,
			[1398657600000 , 2071] ,
			[1401249600000 , 2091] ,
			[1403928000000 , 2002] ,
			[1406520000000 , 2084] ,
			[1409198400000 , 1864] ,
			[1411876800000 , 2000] ,
			[1414468800000 , 1863] ,
			[1417150800000 , 1377] ,
			[1419742800000 , 1587] ,
			[1422421200000 , 1198] ,
			[1425099600000 , 1426] ,
			[1427515200000 , 2050] ,
			[1430193600000 , 2021] ,
			[1432785600000 , 2127] ,
			[1435464000000 , 2460] ,
			[1438056000000 , 2305] ,
			[1440734400000 , 2155] ,
			[1443412800000 , 2217] ,
			[1446004800000 , 2559] ,
			[1448686800000 , 1843] ,
			[1451278800000 , 1857] ,
			[1453957200000 , 1341] ,
			[1456635600000 , 1419] ,
			[1459137600000 , 2212] ,
			[1461816000000 , 2231] ,
			[1464408000000 , 2223] ,
			[1467086400000 , 2300] ,
			[1469678400000 , 2090] ,
			[1472356800000 , 2263] ,
			[1475035200000 , 2182] ,
			[1477627200000 , 2178] ,
			[1480309200000 , 1871] ,
			[1482901200000 , 1696] ,
			[1485579600000 , 1603] ,
			[1488258000000 , 1711] ,
			[1490673600000 , 2203] ,
			[1493352000000 , 2029] ,
			[1495944000000 , 2436] ,
			[1498622400000 , 2202]]

        } ,
		
		{
            "key" : "DM" ,
            color: "#80b1d3",
            "values" : [[1264741200000 , 63] ,
			[1267333200000 , 93] ,
			[1269835200000 , 89] ,
			[1272513600000 , 89] ,
			[1275105600000 , 97] ,
			[1277784000000 , 120] ,
			[1280376000000 , 121] ,
			[1283054400000 , 94] ,
			[1285732800000 , 63] ,
			[1288324800000 , 80] ,
			[1291006800000 , 98] ,
			[1293598800000 , 87] ,
			[1296277200000 , 77] ,
			[1298869200000 , 79] ,
			[1301284800000 , 94] ,
			[1303963200000 , 115] ,
			[1306555200000 , 87] ,
			[1309233600000 , 130] ,
			[1311825600000 , 136] ,
			[1314504000000 , 113] ,
			[1317182400000 , 67] ,
			[1319774400000 , 94] ,
			[1322456400000 , 86] ,
			[1325048400000 , 107] ,
			[1327726800000 , 105] ,
			[1330405200000 , 98] ,
			[1332907200000 , 112] ,
			[1335585600000 , 91] ,
			[1338177600000 , 134] ,
			[1340856000000 , 97] ,
			[1343448000000 , 109] ,
			[1346126400000 , 117] ,
			[1348804800000 , 107] ,
			[1351396800000 , 122] ,
			[1354078800000 , 74] ,
			[1356670800000 , 102] ,
			[1359349200000 , 102] ,
			[1362027600000 , 110] ,
			[1364443200000 , 119] ,
			[1367121600000 , 122] ,
			[1369713600000 , 137] ,
			[1372392000000 , 135] ,
			[1374984000000 , 148] ,
			[1377662400000 , 170] ,
			[1380340800000 , 120] ,
			[1382932800000 , 161] ,
			[1385614800000 , 129] ,
			[1388206800000 , 123] ,
			[1390885200000 , 105] ,
			[1393563600000 , 112] ,
			[1395979200000 , 138] ,
			[1398657600000 , 156] ,
			[1401249600000 , 152] ,
			[1403928000000 , 167] ,
			[1406520000000 , 193] ,
			[1409198400000 , 174] ,
			[1411876800000 , 163] ,
			[1414468800000 , 151] ,
			[1417150800000 , 147] ,
			[1419742800000 , 212] ,
			[1422421200000 , 157] ,
			[1425099600000 , 146] ,
			[1427515200000 , 166] ,
			[1430193600000 , 192] ,
			[1432785600000 , 215] ,
			[1435464000000 , 209] ,
			[1438056000000 , 183] ,
			[1440734400000 , 152] ,
			[1443412800000 , 163] ,
			[1446004800000 , 227] ,
			[1448686800000 , 204] ,
			[1451278800000 , 175] ,
			[1453957200000 , 166] ,
			[1456635600000 , 144] ,
			[1459137600000 , 212] ,
			[1461816000000 , 195] ,
			[1464408000000 , 192] ,
			[1467086400000 , 203] ,
			[1469678400000 , 177] ,
			[1472356800000 , 208] ,
			[1475035200000 , 188] ,
			[1477627200000 , 184] ,
			[1480309200000 , 222] ,
			[1482901200000 , 161] ,
			[1485579600000 , 187] ,
			[1488258000000 , 172] ,
			[1490673600000 , 186] ,
			[1493352000000 , 185] ,
			[1495944000000 , 190] ,
			[1498622400000 , 207]]

        }
    ];
    var chart;
    nv.addGraph(function() {
        chart = nv.models.stackedAreaChart()
            .useInteractiveGuideline(true)
            .x(function(d) { return d[0] })
            .y(function(d) { return d[1] })
            .controlLabels({stacked: "Stacked"}) 
            .duration(300);

			
        chart.xAxis			
			.ticks(3)
			.tickFormat( function ( d ) {
                             // get the milliseconds since Epoch for the date
                             //var milli = (x.getTime() - 10000);

                             // calculate new date 10 seconds earlier. Could be one second, 
                             // but I like a little buffer for my neuroses
                             //var vanilli = new Date(milli);
							var vanilli = new Date(d);
							
                             // calculate the month (0-11) based on the new date
                             var mon = vanilli.getMonth();
                             var yr = vanilli.getFullYear();

                             // return appropriate quarter for that month
                             if ( mon <= 2 ) {
                                 return  "Q1-" + yr;
                             } else if ( mon <= 5 ) {
                                 return  "Q2-" + yr;
                             } else if ( mon <= 8 ) {
                                 return  "Q3-" + yr;
                             } else {
                                 return "Q4-" + yr;
                             }
                         } )

		chart.xScale(d3.time.scale());

	 chart._options.controlOptions = ['Stacked', 'Expanded'];
	 
	 
	 
		
        chart.yAxis
			.ticks(8)
			.tickFormat(d3.format('.2s'));
			
			
			//Example of how to customize the tooltip.
		chart.interactiveLayer
			.tooltip
			//.headerFormatter(function(d) {return d3.time.format('%m')(new Date(d));})
			.headerFormatter(function(d) {return ((d));})
			.valueFormatter(d3.format(','));
			
			d3.select('#chart1')
			  .append("text")
			  .attr("x", 450)             
			  .attr("y", 80)
			  .attr("text-anchor", "right")  
			  .style("font-size", "18px")		  
			  .text("");
			  
			
        //chart.legend.vers('furious');
        d3.select('#chart1')
            .datum(histcatexplong)
            .transition().duration(1000)
            .call(chart)
            .each('start', function() {
                setTimeout(function() {
                    d3.selectAll('#chart1 *').each(function() {
                        if(this.__transition__)
                            this.__transition__.duration = 1;
                    })
                }, 0)
            });
        nv.utils.windowResize(chart.update);
        return chart;
    });
</script>
</body>
</html>