<!DOCTYPE html>
<html>
<head>
    <!-- <meta charset="utf-8"> -->
    <!-- <link href="../build/nv.d3.css" rel="stylesheet" type="text/css"> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script> -->
    <!-- <script src="../build/nv.d3_1.8.1.js"></script> -->
	<!-- <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel='stylesheet' type='text/css'> -->
	
	<meta charset="utf-8">
    <link href="../build/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="../build/nv.d3.js"></script>
	
	<!-- USE THE BELOW LIBRARY FOR TOOLTIP TO WORK ON LIVE VERSION -->
	<!-- <script src="../build/nv.d3_1.8.1.js"></script>  -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel='stylesheet' type='text/css'>

    <style>
      text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
		
		
		
    </style>
</head>
<body class='with-3d-shadow with-transitions'>


<svg id="chart1"></svg>

<script>
    var histcatexplong = [
		{
            "key" : "NB" ,
            color: "#8dd3c7",
            "values" : [[954302400000 , 1645] ,
			[962251200000 , 2234] ,
			[970200000000 , 1931] ,
			[978066000000 , 2286] ,
			[985838400000 , 2338] ,
			[993787200000 , 3328] ,
			[1001736000000 , 1983] ,
			[1009602000000 , 2795] ,
			[1017374400000 , 2826] ,
			[1025323200000 , 2589] ,
			[1033272000000 , 2636] ,
			[1041138000000 , 2968] ,
			[1048910400000 , 2856] ,
			[1056859200000 , 3355] ,
			[1064808000000 , 3223] ,
			[1072674000000 , 3713] ,
			[1080532800000 , 3679] ,
			[1088481600000 , 4039] ,
			[1096430400000 , 4267] ,
			[1104296400000 , 3804] ,
			[1112068800000 , 4574] ,
			[1120017600000 , 4427] ,
			[1127966400000 , 4306] ,
			[1135832400000 , 4054] ,
			[1143604800000 , 4866] ,
			[1151553600000 , 4231] ,
			[1159502400000 , 3777] ,
			[1167368400000 , 3778] ,
			[1175140800000 , 4202] ,
			[1183089600000 , 4276] ,
			[1191038400000 , 3247] ,
			[1198904400000 , 3362] ,
			[1206763200000 , 3083] ,
			[1214712000000 , 3612] ,
			[1222660800000 , 2707] ,
			[1230526800000 , 1837] ,
			[1238299200000 , 2411] ,
			[1246248000000 , 2551] ,
			[1254196800000 , 1985] ,
			[1262062800000 , 2010] ,
			[1269835200000 , 1848] ,
			[1277784000000 , 1589] ,
			[1285732800000 , 1613] ,
			[1293598800000 , 1436] ,
			[1301284800000 , 1214] ,
			[1309233600000 , 1563] ,
			[1317182400000 , 1256] ,
			[1325048400000 , 1208] ,
			[1332907200000 , 1300] ,
			[1340856000000 , 1553] ,
			[1348804800000 , 1329] ,
			[1356670800000 , 999] ,
			[1364443200000 , 1326] ,
			[1372392000000 , 1522] ,
			[1380340800000 , 1292] ,
			[1388206800000 , 1370] ,
			[1395979200000 , 1590] ,
			[1403928000000 , 1681] ,
			[1411876800000 , 1734] ,
			[1419742800000 , 1491] ,
			[1427515200000 , 1432] ,
			[1435464000000 , 2097] ,
			[1443412800000 , 1678] ,
			[1451278800000 , 2218] ,
			[1459137600000 , 1759] ,
			[1467086400000 , 2063] ,
			[1475035200000 , 2036] ,
			[1482901200000 , 1667] ,
			[1490673600000 , 1859] ,
			[1498622400000 , 2114] ,
			[1506657600000 , 2193] ,
			[1514437200000 , 2115] ,
			[1522209600000 , 2054] ,
			[1530158400000 , 2179] ,
			[1538107200000 , 1820] ,
			[1545973200000 , 2033] ,
			[1553745600000 , 2005] ,
			[1561694400000 , 2065] ,
			[1569643200000 , 1868]]

        } ,
		
		{
            "key" : "A1" , 
            color: "#fdb462",
            "values" : [[954302400000 , 1558] ,
			[962251200000 , 1770] ,
			[970200000000 , 1700] ,
			[978066000000 , 1590] ,
			[985838400000 , 1486] ,
			[993787200000 , 2086] ,
			[1001736000000 , 1649] ,
			[1009602000000 , 1790] ,
			[1017374400000 , 1734] ,
			[1025323200000 , 2131] ,
			[1033272000000 , 1984] ,
			[1041138000000 , 1852] ,
			[1048910400000 , 1759] ,
			[1056859200000 , 2502] ,
			[1064808000000 , 2214] ,
			[1072674000000 , 2074] ,
			[1080532800000 , 2179] ,
			[1088481600000 , 2632] ,
			[1096430400000 , 2643] ,
			[1104296400000 , 2234] ,
			[1112068800000 , 2556] ,
			[1120017600000 , 2957] ,
			[1127966400000 , 2853] ,
			[1135832400000 , 2447] ,
			[1143604800000 , 2726] ,
			[1151553600000 , 3150] ,
			[1159502400000 , 2741] ,
			[1167368400000 , 2322] ,
			[1175140800000 , 2357] ,
			[1183089600000 , 2862] ,
			[1191038400000 , 2473] ,
			[1198904400000 , 2089] ,
			[1206763200000 , 2037] ,
			[1214712000000 , 2296] ,
			[1222660800000 , 2042] ,
			[1230526800000 , 1625] ,
			[1238299200000 , 1730] ,
			[1246248000000 , 2105] ,
			[1254196800000 , 1766] ,
			[1262062800000 , 1469] ,
			[1269835200000 , 1497] ,
			[1277784000000 , 1757] ,
			[1285732800000 , 1654] ,
			[1293598800000 , 1607] ,
			[1301284800000 , 1615] ,
			[1309233600000 , 1865] ,
			[1317182400000 , 1695] ,
			[1325048400000 , 1552] ,
			[1332907200000 , 1694] ,
			[1340856000000 , 1834] ,
			[1348804800000 , 1768] ,
			[1356670800000 , 1547] ,
			[1364443200000 , 1598] ,
			[1372392000000 , 1693] ,
			[1380340800000 , 1669] ,
			[1388206800000 , 1592] ,
			[1395979200000 , 1589] ,
			[1403928000000 , 1824] ,
			[1411876800000 , 1800] ,
			[1419742800000 , 1613] ,
			[1427515200000 , 1606] ,
			[1435464000000 , 1948] ,
			[1443412800000 , 1745] ,
			[1451278800000 , 1978] ,
			[1459137600000 , 2049] ,
			[1467086400000 , 2366] ,
			[1475035200000 , 2180] ,
			[1482901200000 , 1975] ,
			[1490673600000 , 2152] ,
			[1498622400000 , 2467] ,
			[1506657600000 , 2399] ,
			[1514437200000 , 2220] ,
			[1522209600000 , 2258] ,
			[1530158400000 , 2545] ,
			[1538107200000 , 2207] ,
			[1545973200000 , 2166] ,
			[1553745600000 , 2251] ,
			[1561694400000 , 2571] ,
			[1569643200000 , 2264]]

        } ,
		
		{
            "key" : "A2" ,
            color: "#C0504D",
            "values" : [[954302400000 , 14497] ,
			[962251200000 , 14942] ,
			[970200000000 , 15569] ,
			[978066000000 , 14272] ,
			[985838400000 , 14620] ,
			[993787200000 , 16145] ,
			[1001736000000 , 13536] ,
			[1009602000000 , 14911] ,
			[1017374400000 , 14424] ,
			[1025323200000 , 15397] ,
			[1033272000000 , 14933] ,
			[1041138000000 , 15019] ,
			[1048910400000 , 14296] ,
			[1056859200000 , 16076] ,
			[1064808000000 , 16467] ,
			[1072674000000 , 15744] ,
			[1080532800000 , 16089] ,
			[1088481600000 , 17477] ,
			[1096430400000 , 18088] ,
			[1104296400000 , 16883] ,
			[1112068800000 , 17347] ,
			[1120017600000 , 18377] ,
			[1127966400000 , 19375] ,
			[1135832400000 , 17473] ,
			[1143604800000 , 18354] ,
			[1151553600000 , 18918] ,
			[1159502400000 , 18545] ,
			[1167368400000 , 17864] ,
			[1175140800000 , 18375] ,
			[1183089600000 , 20762] ,
			[1191038400000 , 20315] ,
			[1198904400000 , 19443] ,
			[1206763200000 , 19428] ,
			[1214712000000 , 21868] ,
			[1222660800000 , 21462] ,
			[1230526800000 , 19778] ,
			[1238299200000 , 19331] ,
			[1246248000000 , 21618] ,
			[1254196800000 , 20630] ,
			[1262062800000 , 18366] ,
			[1269835200000 , 18246] ,
			[1277784000000 , 21509] ,
			[1285732800000 , 21806] ,
			[1293598800000 , 21086] ,
			[1301284800000 , 21133] ,
			[1309233600000 , 24154] ,
			[1317182400000 , 23987] ,
			[1325048400000 , 22336] ,
			[1332907200000 , 22314] ,
			[1340856000000 , 24787] ,
			[1348804800000 , 24561] ,
			[1356670800000 , 21886] ,
			[1364443200000 , 23349] ,
			[1372392000000 , 26264] ,
			[1380340800000 , 28037] ,
			[1388206800000 , 26418] ,
			[1395979200000 , 24875] ,
			[1403928000000 , 28602] ,
			[1411876800000 , 29316] ,
			[1419742800000 , 27295] ,
			[1427515200000 , 25976] ,
			[1435464000000 , 30487] ,
			[1443412800000 , 30813] ,
			[1451278800000 , 28957] ,
			[1459137600000 , 29599] ,
			[1467086400000 , 31629] ,
			[1475035200000 , 32531] ,
			[1482901200000 , 28971] ,
			[1490673600000 , 30452] ,
			[1498622400000 , 33039] ,
			[1506657600000 , 32143] ,
			[1514437200000 , 30217] ,
			[1522209600000 , 29065] ,
			[1530158400000 , 32827] ,
			[1538107200000 , 31473] ,
			[1545973200000 , 29194] ,
			[1553745600000 , 33061] ,
			[1561694400000 , 36869] ,
			[1569643200000 , 29345]]

        } ,
		
		{
            "key" : "A3" ,
            color: "#bc80bd",
            "values" : [[954302400000 , 2208] ,
			[962251200000 , 2765] ,
			[970200000000 , 2444] ,
			[978066000000 , 2343] ,
			[985838400000 , 2313] ,
			[993787200000 , 2618] ,
			[1001736000000 , 1900] ,
			[1009602000000 , 2320] ,
			[1017374400000 , 2929] ,
			[1025323200000 , 2568] ,
			[1033272000000 , 2360] ,
			[1041138000000 , 2345] ,
			[1048910400000 , 2624] ,
			[1056859200000 , 3358] ,
			[1064808000000 , 2731] ,
			[1072674000000 , 2559] ,
			[1080532800000 , 2744] ,
			[1088481600000 , 3246] ,
			[1096430400000 , 2669] ,
			[1104296400000 , 2828] ,
			[1112068800000 , 3029] ,
			[1120017600000 , 3331] ,
			[1127966400000 , 3211] ,
			[1135832400000 , 3253] ,
			[1143604800000 , 3450] ,
			[1151553600000 , 4266] ,
			[1159502400000 , 3703] ,
			[1167368400000 , 4002] ,
			[1175140800000 , 4612] ,
			[1183089600000 , 4679] ,
			[1191038400000 , 4202] ,
			[1198904400000 , 4818] ,
			[1206763200000 , 5707] ,
			[1214712000000 , 5227] ,
			[1222660800000 , 4294] ,
			[1230526800000 , 4059] ,
			[1238299200000 , 4881] ,
			[1246248000000 , 4512] ,
			[1254196800000 , 4232] ,
			[1262062800000 , 3958] ,
			[1269835200000 , 4737] ,
			[1277784000000 , 5603] ,
			[1285732800000 , 5235] ,
			[1293598800000 , 4663] ,
			[1301284800000 , 5427] ,
			[1309233600000 , 5216] ,
			[1317182400000 , 4776] ,
			[1325048400000 , 4803] ,
			[1332907200000 , 5653] ,
			[1340856000000 , 5740] ,
			[1348804800000 , 5585] ,
			[1356670800000 , 4653] ,
			[1364443200000 , 5436] ,
			[1372392000000 , 5984] ,
			[1380340800000 , 5439] ,
			[1388206800000 , 5139] ,
			[1395979200000 , 5550] ,
			[1403928000000 , 6164] ,
			[1411876800000 , 5948] ,
			[1419742800000 , 4827] ,
			[1427515200000 , 4674] ,
			[1435464000000 , 6608] ,
			[1443412800000 , 6677] ,
			[1451278800000 , 6259] ,
			[1459137600000 , 4972] ,
			[1467086400000 , 6754] ,
			[1475035200000 , 6535] ,
			[1482901200000 , 5745] ,
			[1490673600000 , 5517] ,
			[1498622400000 , 6667] ,
			[1506657600000 , 6640] ,
			[1514437200000 , 3776] ,
			[1522209600000 , 2991] ,
			[1530158400000 , 3203] ,
			[1538107200000 , 3180] ,
			[1545973200000 , 2646] ,
			[1553745600000 , 2118] ,
			[1561694400000 , 2392] ,
			[1569643200000 , 2253]]

        } ,
		
		{
            "key" : "DM" ,
            color: "#80b1d3",
            "values" : [[954302400000 , 381] ,
			[962251200000 , 411] ,
			[970200000000 , 402] ,
			[978066000000 , 368] ,
			[985838400000 , 405] ,
			[993787200000 , 447] ,
			[1001736000000 , 305] ,
			[1009602000000 , 435] ,
			[1017374400000 , 421] ,
			[1025323200000 , 512] ,
			[1033272000000 , 546] ,
			[1041138000000 , 544] ,
			[1048910400000 , 527] ,
			[1056859200000 , 625] ,
			[1064808000000 , 648] ,
			[1072674000000 , 590] ,
			[1080532800000 , 656] ,
			[1088481600000 , 799] ,
			[1096430400000 , 835] ,
			[1104296400000 , 735] ,
			[1112068800000 , 828] ,
			[1120017600000 , 1018] ,
			[1127966400000 , 895] ,
			[1135832400000 , 946] ,
			[1143604800000 , 990] ,
			[1151553600000 , 1081] ,
			[1159502400000 , 991] ,
			[1167368400000 , 839] ,
			[1175140800000 , 863] ,
			[1183089600000 , 1012] ,
			[1191038400000 , 837] ,
			[1198904400000 , 793] ,
			[1206763200000 , 726] ,
			[1214712000000 , 973] ,
			[1222660800000 , 532] ,
			[1230526800000 , 422] ,
			[1238299200000 , 397] ,
			[1246248000000 , 378] ,
			[1254196800000 , 359] ,
			[1262062800000 , 290] ,
			[1269835200000 , 245] ,
			[1277784000000 , 306] ,
			[1285732800000 , 278] ,
			[1293598800000 , 265] ,
			[1301284800000 , 250] ,
			[1309233600000 , 332] ,
			[1317182400000 , 316] ,
			[1325048400000 , 287] ,
			[1332907200000 , 315] ,
			[1340856000000 , 322] ,
			[1348804800000 , 333] ,
			[1356670800000 , 298] ,
			[1364443200000 , 331] ,
			[1372392000000 , 394] ,
			[1380340800000 , 438] ,
			[1388206800000 , 413] ,
			[1395979200000 , 355] ,
			[1403928000000 , 475] ,
			[1411876800000 , 530] ,
			[1419742800000 , 510] ,
			[1427515200000 , 469] ,
			[1435464000000 , 616] ,
			[1443412800000 , 498] ,
			[1451278800000 , 606] ,
			[1459137600000 , 522] ,
			[1467086400000 , 590] ,
			[1475035200000 , 573] ,
			[1482901200000 , 567] ,
			[1490673600000 , 545] ,
			[1498622400000 , 582] ,
			[1506657600000 , 594] ,
			[1514437200000 , 569] ,
			[1522209600000 , 479] ,
			[1530158400000 , 469] ,
			[1538107200000 , 548] ,
			[1545973200000 , 596] ,
			[1553745600000 , 485] ,
			[1561694400000 , 557] ,
			[1569643200000 , 564]]

        }
    ];
    var chart;
    nv.addGraph(function() {
        chart = nv.models.stackedAreaChart()
            .useInteractiveGuideline(true)
            .x(function(d) { return d[0] })
            .y(function(d) { return d[1] })
            .controlLabels({stacked: "Stacked"}) 
            .duration(300);
			
        chart.xAxis			
			.ticks(3)
			.tickFormat( function ( d ) {
                             // get the milliseconds since Epoch for the date
                             //var milli = (x.getTime() - 10000);
                             // calculate new date 10 seconds earlier. Could be one second, 
                             // but I like a little buffer for my neuroses
                             //var vanilli = new Date(milli);
							var vanilli = new Date(d);
							
                             // calculate the month (0-11) based on the new date
			if (typeof d === 'string') {
				d = parseFloat(d);
				}
                             var mon = vanilli.getMonth();
                             var yr = vanilli.getFullYear();
                             // return appropriate quarter for that month
                             if ( mon <= 2 ) {
                                 return  "Q1-" + yr;
                             } else if ( mon <= 5 ) {
                                 return  "Q2-" + yr;
                             } else if ( mon <= 8 ) {
                                 return  "Q3-" + yr;
                             } else {
                                 return "Q4-" + yr;
                             }
                         } )
		chart.xScale(d3.time.scale());
	 chart._options.controlOptions = ['Stacked', 'Expanded'];
	 
	 
	chart.interpolate("linear"); 
		
        chart.yAxis
			.ticks(8)
			.tickFormat(d3.format('.2s'));
			
			
			//Example of how to customize the tooltip.
		chart.interactiveLayer
			.tooltip
			//.headerFormatter(function(d) {return d3.time.format('%m/%Y')(new Date(d));})
			//.headerFormatter(function(d) {return (d);})
	    		.headerFormatter(function(d) {return nv.models.axis().tickFormat()(d);})
			.valueFormatter(d3.format(','));
			
			d3.select('#chart1')
			  .append("text")
			  .attr("x", 450)             
			  .attr("y", 80)
			  .attr("text-anchor", "right")  
			  .style("font-size", "18px")		  
			  .text("");
			  
			
        //chart.legend.vers('furious');
        d3.select('#chart1')
            .datum(histcatexplong)
            .transition().duration(1000)
            .call(chart)
            .each('start', function() {
                setTimeout(function() {
                    d3.selectAll('#chart1 *').each(function() {
                        if(this.__transition__)
                            this.__transition__.duration = 1;
                    })
                }, 0)
            });
        nv.utils.windowResize(chart.update);
        return chart;
    });
</script>
</body>
</html>